<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Circle of Fifths â€“ Mobile Friendly</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
    --bg: #111;
    --circle: #444;
    --key: #333;
    --active: #00c8ff;
    --text: #fff;
}

.light {
    --bg: #f4f4f4;
    --circle: #bbb;
    --key: #ddd;
    --active: #ff9800;
    --text: #000;
}

body {
    margin: 0;
    font-family: Arial, sans-serif;
    background: var(--bg);
    color: var(--text);
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    min-height: 100vh;
    padding: 10px;
}

h1 {
    margin: 6px 0;
    font-size: 22px;
}

button {
    margin-bottom: 10px;
    padding: 8px 16px;
    border-radius: 8px;
    border: none;
    cursor: pointer;
    font-size: 14px;
}

#circle {
    position: relative;
    width: min(92vw, 340px);
    height: min(92vw, 340px);
    border-radius: 50%;
    border: 2px solid var(--circle);
    margin-bottom: 10px;
}

.key {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 64px;
    height: 36px;
    margin: -18px;
    background: var(--key);
    border-radius: 10px;
    text-align: center;
    cursor: pointer;
    font-size: 16px;
    line-height: 36px;
}

.active {
    background: var(--active);
    color: #000;
    font-weight: bold;
}

#info {
    width: 100%;
    max-width: 100%;
    text-align: center;
    margin-top: 6px;
}

/* ===== MOBILE CHORD TABLE ===== */
.table-wrap {
    overflow-x: auto;           /* ðŸ‘ˆ horizontal scroll on phone */
    -webkit-overflow-scrolling: touch;
    margin-top: 8px;
}

table {
    border-collapse: collapse;
    min-width: 520px;           /* ðŸ‘ˆ keeps chords readable */
    margin: auto;
}

th, td {
    border: 1px solid var(--circle);
    padding: 10px 8px;
    text-align: center;
}

th {
    font-size: 13px;
    opacity: 0.85;
}

td {
    font-size: 24px;            /* ðŸ‘ˆ BIG chords for fingers */
    font-weight: bold;
}

/* ===== EXTRA SMALL PHONES ===== */
@media (max-width: 360px) {
    td { font-size: 20px; }
    .key { font-size: 14px; }
}
</style>
</head>

<body>
<h1>ðŸŽµ Circle of Fifths</h1>
<button onclick="toggleTheme()">Toggle Theme</button>

<div id="circle"></div>
<div id="info">Tap a key</div>

<script>
const AudioCtx = new (window.AudioContext || window.webkitAudioContext)();
function playSound(freq) {
    const osc = AudioCtx.createOscillator();
    const gain = AudioCtx.createGain();
    osc.frequency.value = freq;
    osc.connect(gain);
    gain.connect(AudioCtx.destination);
    gain.gain.setValueAtTime(0.15, AudioCtx.currentTime);
    gain.gain.exponentialRampToValueAtTime(0.001, AudioCtx.currentTime + 0.4);
    osc.start();
    osc.stop(AudioCtx.currentTime + 0.4);
}

const keys = [
 {maj:"C",  sig:"0",  chords:["C","Dm","Em","F","G","Am","BÂ°"]},
 {maj:"G",  sig:"1â™¯", chords:["G","Am","Bm","C","D","Em","Fâ™¯Â°"]},
 {maj:"D",  sig:"2â™¯", chords:["D","Em","Fâ™¯m","G","A","Bm","Câ™¯Â°"]},
 {maj:"A",  sig:"3â™¯", chords:["A","Bm","Câ™¯m","D","E","Fâ™¯m","Gâ™¯Â°"]},
 {maj:"E",  sig:"4â™¯", chords:["E","Fâ™¯m","Gâ™¯m","A","B","Câ™¯m","Dâ™¯Â°"]},
 {maj:"B",  sig:"5â™¯", chords:["B","Câ™¯m","Dâ™¯m","E","Fâ™¯","Gâ™¯m","Aâ™¯Â°"]},
 {maj:"Fâ™¯", sig:"6â™¯", chords:["Fâ™¯","Gâ™¯m","Aâ™¯m","B","Câ™¯","Dâ™¯m","Eâ™¯Â°"]},
 {maj:"Câ™¯", sig:"7â™¯", chords:["Câ™¯","Dâ™¯m","Eâ™¯m","Fâ™¯","Gâ™¯","Aâ™¯m","Bâ™¯Â°"]},
 {maj:"Aâ™­", sig:"4â™­", chords:["Aâ™­","Bâ™­m","Cm","Dâ™­","Eâ™­","Fm","GÂ°"]},
 {maj:"Eâ™­", sig:"3â™­", chords:["Eâ™­","Fm","Gm","Aâ™­","Bâ™­","Cm","DÂ°"]},
 {maj:"Bâ™­", sig:"2â™­", chords:["Bâ™­","Cm","Dm","Eâ™­","F","Gm","AÂ°"]},
 {maj:"F",  sig:"1â™­", chords:["F","Gm","Am","Bâ™­","C","Dm","EÂ°"]},
];

const circle = document.getElementById("circle");
const info = document.getElementById("info");
const radius = 130;

keys.forEach((k, i) => {
    const angle = (i / 12) * 2 * Math.PI - Math.PI / 2;
    const x = radius * Math.cos(angle);
    const y = radius * Math.sin(angle);

    const div = document.createElement("div");
    div.className = "key";
    div.style.transform = `translate(${x}px, ${y}px)`;
    div.textContent = k.maj;

    div.onclick = () => {
        document.querySelectorAll(".key").forEach(e => e.classList.remove("active"));
        div.classList.add("active");
        playSound(220 + i * 18);

        info.innerHTML = `
        <b>${k.maj} Major</b> (${k.sig})
        <div class="table-wrap">
        <table>
            <tr>
                <th>I</th><th>ii</th><th>iii</th><th>IV</th>
                <th>V</th><th>vi</th><th>viiÂ°</th>
            </tr>
            <tr>
                <td>${k.chords[0]}</td>
                <td>${k.chords[1]}</td>
                <td>${k.chords[2]}</td>
                <td>${k.chords[3]}</td>
                <td>${k.chords[4]}</td>
                <td>${k.chords[5]}</td>
                <td>${k.chords[6]}</td>
            </tr>
        </table>
        </div>`;
    };

    circle.appendChild(div);
});

function toggleTheme() {
    document.body.classList.toggle("light");
}
</script>
</body>
</html>
